# FINAL HANDOFF - G11/G12 BASICS

Stand: 2026-02-25
Projekt: `Wanda-Repo` (mit OpenClaw VPS Betriebs-Haertung)
Status: Hand-off faehig

## 1) Ziel dieses Laufs

- Basics-Track stabil und reproduzierbar abschliessen.
- OpenClaw VPS auf business-taugliche Defaults haerten (Security, Delivery, Token-Effizienz).
- Provider-/Model-Fallbacks robust machen ohne Antigravity-Abhaengigkeit.
- Forschung und Ergebnisse dauerhaft dokumentieren.

## 2) Umgesetzt

### `Wanda-Repo` Core

- Provider-Aktivierung gehaertet: keine Dummy-Keys, Aktivierung nur bei valider Auth.
- Fallback-Ketten auf real verfuegbare Modell-Referenzen ausgerichtet.
- Harte Output-Token-Guardrails eingefuehrt (env-gesteuert, zentraler Clamp in `limits.ts`).

### OpenClaw VPS Hardening (Container-Betrieb)

- `announce` Routing korrigiert: fehlende Targets beseitigt.
- `channel:last` Spampfade fuer Ops-Jobs reduziert.
- Gateway Trust Surface gehaertet (`allowedOrigins`/`trustedProxies` bereinigt).
- Message/Queue Limits fuer mobile Kanaele auf geringeren Token-Waste abgestimmt.
- Stale `google-antigravity:*` Auth-Profile entfernt (mit Backup/Archive-First Ansatz).
- Stale Cron-Sessions bereinigt (archiviert, dann entfernt), um Modell-/Provider-Drift zu stoppen.
- Security Audit auf `critical=0`, `warn=0` gebracht.

### Provider/Agent Smoke (minimal-kosten)

- Kritische Agents per 1-turn `OK` Smoke validiert:
  - `scout`, `crypto-trader`, `wanda`, `builder`, `cso`, `closer`
- Ergebnis: alle `status=ok`
- Artefakt: `research/openclaw_vps/2026-02-25-smoke/agent_smoke_results.json`

## 3) Wichtige Artefakte

### In `40_Products`

- `G11_G12_EXECUTION.md`
- `OPENCLAW_VPS_AUDIT_CHECKPOINT_2026-02-25.md`
- `research/openclaw_vps/OPENCLAW_G11_G12_RESEARCH_2026-02-25.md`
- `research/openclaw_vps/OPENCLAW_G11_G12_TODO.md`
- `research/openclaw_vps/2026-02-25-pre/`
- `research/openclaw_vps/2026-02-25-post/`
- `research/openclaw_vps/2026-02-25-smoke/`

### Ops-Skripte (dauerhaft)

- `scripts/vps_openclaw_exec.sh`
- `scripts/capture_openclaw_vps_snapshot.sh`
- `scripts/prune_openclaw_vps_cron_sessions.sh`
- `scripts/validate_g11_g12.sh`

## 4) Vorher/Nachher Kurzdelta

- `announceMissingTargetCount`: `4 -> 0`
- Security Audit: `warn 2 -> warn 0` (`critical 0` blieb stabil)
- Aktive Auth/Provider-Flanke: `google-antigravity` entfernt
- `announce` Jobs: `6 -> 4` (weniger Rauschen, kritische Notify-Pfade behalten)

Hinweis:
- Historische `cron lastStatus=error` Eintraege bleiben sichtbar, bis die naechsten geplanten Runs erfolgreich durchgelaufen sind.

## 5) Betrieb / Re-Validation

### `Wanda-Repo` lokal

```bash
cd /home/jannis/Schreibtisch/Work-OS/40_Products/Wanda-Repo
pnpm run validate:basics
pnpm run debug:bot
./wanda -- doctor
```

### OpenClaw VPS Snapshot + Audit

```bash
cd /home/jannis/Schreibtisch/Work-OS/40_Products
./scripts/capture_openclaw_vps_snapshot.sh
./scripts/vps_openclaw_exec.sh "openclaw security audit --json"
```

## 6) Offene Restpunkte (naechster Sprint)

- Einen kompletten Cron-Zyklus abwarten und ehemals rote Jobs auf `ok` verifizieren.
- OAuth-Profile mit `remainingMs < 0` gezielt refreshen.
- Per-Job Timeout-Tiers finalisieren (light/heavy).
- Monatliches Security-Snapshot-Diff dauerhaft einplanen.

## 7) Entscheidungsnotiz Antigravity

- Offiziell wurde der Antigravity-Provider ab OpenClaw `2026.2.22` entfernt.
- Fuer produktiven Betrieb wird keine erzwungene Rueckintegration empfohlen.
- Empfohlene produktive Provider: `google-gemini-cli`, `openai-codex`, `anthropic`, `github-copilot` (je nach Auth/Policy).

## 8) P0/P1 Abschluss-Update (2026-02-25, spaeter Lauf)

- OpenClaw Cron-Status final gruen:
  - `errorCount: 0`
  - `announceMissingTargetCount: 0`
- Kritische Cron-Jobs erneut ausgefuehrt und auf `ok` gebracht (inkl. vormals roter Sales/Proposal/Janitor/Scout/CEO/Integration Flows).
- Timeout-Tiers auf Job-Ebene finalisiert (`120-240s` light, `300-420s` heavy).
- Zusaeztliche Testluecken geschlossen:
  - `packages/channels/tests/pairing.test.ts`
  - `packages/secrets/tests/redaction.test.ts`
  - `packages/memory/tests/store.smoke.test.ts`
  - `packages/sandbox/tests/runner.smoke.test.ts`
- Monatlicher Security-Diff als Betriebslauf hinzugefuegt:
  - Script: `40_Products/scripts/monthly_openclaw_security_snapshot.sh`
  - Ops-Doc: `Wanda-Repo/docs/06_ops/OPENCLAW_MONTHLY_AUDIT.md`
- Pairing Ops-Runbook hinzugefuegt:
  - `Wanda-Repo/docs/06_ops/PAIRING_WALKTHROUGH.md`
